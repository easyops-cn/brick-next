"use strict";(globalThis.webpackChunknext_docs=globalThis.webpackChunknext_docs||[]).push([[7368],{3922:(n,e,c)=>{c.r(e),c.d(e,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>l});var r=c(5893),s=c(1151);const t={title:"Control Nodes"},o=void 0,d={id:"concepts/control-nodes",title:"Control Nodes",description:"\u8001\u6a21\u677f\uff08NT \u5305\uff09\u5728 Brick Next V3 \u4e0b\u5c06\u653e\u5f03\u652f\u6301\uff08\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u7f16\u6392\u9ed1\u7bb1\uff0cNT \u7684\u5b58\u5728\u4f7f\u5f97 V3 \u5bf9\u52a0\u8f7d\u6027\u80fd\u7684\u4f18\u5316\u65e0\u6cd5\u8fdb\u884c\uff09\uff0c\u56e0\u6b64\u9700\u8981\u66ff\u4ee3\u7684\u65b9\u6848\u3002",source:"@site/docs/concepts/control-nodes.md",sourceDirName:"concepts",slug:"/concepts/control-nodes",permalink:"/docs/concepts/control-nodes",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Control Nodes"},sidebar:"docsSidebar",previous:{title:"Functions",permalink:"/docs/concepts/storyboard-functions"},next:{title:"Nesting Bricks",permalink:"/docs/concepts/nesting-bricks"}},i={},l=[{value:"\u8ffd\u8e2a\u53d8\u66f4",id:"track",level:2},{value:"\u751f\u547d\u5468\u671f",id:"life-cycle",level:2},{value:"\u53d8\u66f4\u5386\u53f2",id:"history",level:2}];function a(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"\u8001\u6a21\u677f\uff08NT \u5305\uff09\u5728 Brick Next V3 \u4e0b\u5c06\u653e\u5f03\u652f\u6301\uff08\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u7f16\u6392\u9ed1\u7bb1\uff0cNT \u7684\u5b58\u5728\u4f7f\u5f97 V3 \u5bf9\u52a0\u8f7d\u6027\u80fd\u7684\u4f18\u5316\u65e0\u6cd5\u8fdb\u884c\uff09\uff0c\u56e0\u6b64\u9700\u8981\u66ff\u4ee3\u7684\u65b9\u6848\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u5728\u8001\u6a21\u677f\u4e2d\uff0c\u6211\u4eec\u66f4\u591a\u505a\u4e86\u4e00\u4e9b\u6839\u636e\u6307\u5b9a\u53c2\u6570\u6309\u4e00\u5b9a\u903b\u8f91\u63a7\u5236\uff08\u4f8b\u5982\u5faa\u73af\u904d\u5386\u548c\u6761\u4ef6\u5224\u65ad\u7b49\uff09\u7ec4\u88c5\u6210\u4e00\u6bb5\u7f16\u6392\uff0c\u5176\u4e2d\u4e00\u4e9b\u80fd\u529b\u53ef\u4ee5\u5229\u7528 ",(0,r.jsx)(e.code,{children:"CTX/STATE"})," \u7ed3\u5408\u5f53\u524d\u7684 ",(0,r.jsx)(e.code,{children:"if"})," \u8bbe\u7f6e\u5b9e\u73b0\uff0c\u4f46\u4ecd\u6709\u4e00\u4e9b\u573a\u666f\u65e0\u6cd5\u8986\u76d6\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u56e0\u6b64\u6211\u4eec\u5728 Storyboard \u7f16\u6392\u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e9b\u7279\u6b8a\u7684\u63a7\u5236\u8282\u70b9\uff0c\u4f8b\u5982\u5faa\u73af\u904d\u5386\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'brick: ":forEach"\ndataSource: "<% CTX.dataList %>"\nslots:\n  # \u4fdd\u7559\u63d2\u69fd\u7ed3\u6784\uff0c\u4ee5\u4fbf\u517c\u5bb9\u73b0\u6709 Visual Builder \u6784\u4ef6\u6811\u7684\u5c55\u793a\u98ce\u683c\u3002\n  # \u540c\u65f6\u4ee5\u652f\u6301 if/else \u548c switch \u4ee5\u53ca\u672a\u6765\u53ef\u80fd\u7684\u5176\u4ed6\u63a7\u5236\u8282\u70b9\u7684\u6269\u5c55\u3002\n  "":\n    bricks:\n      - brick: my-brick\n        properties:\n          label: "<% ITEM.label %>"\n          value: "<% ITEM.value %>"\n          name: "<% `brick_${INDEX}` %>"\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6761\u4ef6\u5224\u65ad\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'brick: ":if"\ndataSource: "<% CTX.hasPermission %>"\nslots:\n  "":\n    bricks:\n      - brick: a\n      - brick: b\n  "else":\n    bricks:\n      - brick: c\n      - brick: d\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6761\u4ef6\u9009\u62e9\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'brick: ":switch"\ndataSource: |\n  <%\n    CTX.score >= 90\n      ? "a"\n      : CTX.score >= 60\n      ? "b"\n      : "c"\n  %>\nslots:\n  "a": ...\n  "b": ...\n  "c": ...\n'})}),"\n",(0,r.jsx)(e.admonition,{type:"note",children:(0,r.jsxs)(e.p,{children:["\u63a7\u5236\u8282\u70b9\u53ef\u4ee5\u4f7f\u7528\u5728\u666e\u901a\u9875\u9762\u7f16\u6392\u3001\u81ea\u5b9a\u4e49\u6a21\u677f\u548c ",(0,r.jsx)(e.code,{children:"useBrick"})," \u4e2d\u3002"]})}),"\n",(0,r.jsx)(e.h2,{id:"track",children:"\u8ffd\u8e2a\u53d8\u66f4"}),"\n",(0,r.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.a,{href:"/docs/concepts/context",children:"Context"})," \u6216 ",(0,r.jsx)(e.a,{href:"/docs/concepts/template-state",children:"State"})," \u65f6\uff0c\u63a7\u5236\u8282\u70b9\u7684\u6570\u636e\u6e90 ",(0,r.jsx)(e.code,{children:"dataSource"})," \u4e5f\u53ef\u4ee5\u6fc0\u6d3b\u81ea\u52a8\u8ffd\u8e2a\u53d8\u66f4\u5e76\u81ea\u52a8\u91cd\u65b0\u6e32\u67d3\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:"{2}",children:'brick: ":forEach"\ndataSource: "<%= CTX.dataList %>"\nslots: ...\n'})}),"\n",(0,r.jsx)(e.h2,{id:"life-cycle",children:"\u751f\u547d\u5468\u671f"}),"\n",(0,r.jsxs)(e.p,{children:["\u63a7\u5236\u8282\u70b9\u652f\u6301\u4e24\u79cd\u751f\u547d\u5468\u671f\uff1a",(0,r.jsx)(e.a,{href:"/docs/concepts/brick-life-cycle#onmount",children:(0,r.jsx)(e.code,{children:"onMount"})})," \u548c ",(0,r.jsx)(e.a,{href:"/docs/concepts/brick-life-cycle#onunmount",children:(0,r.jsx)(e.code,{children:"onUnmount"})}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u9664\u4e86\u548c\u666e\u901a\u6784\u4ef6\u4e00\u6837\uff0c\u5f53\u9875\u9762\u6302\u8f7d\u548c\u5378\u8f7d\u65f6\u5c06\u89e6\u53d1\u5bf9\u5e94\u7684\u751f\u547d\u5468\u671f\u5916\uff0c\u5bf9\u4e8e\u542f\u7528\u4e86\u8ffd\u8e2a\u53d8\u66f4\u7684\u63a7\u5236\u8282\u70b9\uff0c\u5f53\u5176\u91cd\u65b0\u6e32\u67d3\u65f6\uff0c\u4e5f\u4f1a\u4f9d\u6b21\u89e6\u53d1 ",(0,r.jsx)(e.code,{children:"onUnmount"})," \u548c ",(0,r.jsx)(e.code,{children:"onMount"}),"\uff0c\u6b64\u65f6\uff0c\u5bf9\u5e94\u7684\u4e8b\u4ef6\u5c06\u8bbe\u7f6e ",(0,r.jsx)(e.code,{children:"detail: { rerender: true }"}),"\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",metastring:"{3-13}",children:'brick: ":forEach"\ndataSource: "<%= CTX.dataList %>"\nlifeCycle:\n  onMount:\n    action: console.log\n    args:\n      - :forEach mount\n      - <% EVENT.detail.rerender %>\n  onUnmount:\n    action: console.log\n    args:\n      - :forEach unmount\n      - <% EVENT.detail.rerender %>\n'})}),"\n",(0,r.jsx)(e.h2,{id:"history",children:"\u53d8\u66f4\u5386\u53f2"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u7ec4\u4ef6"}),(0,r.jsx)(e.th,{children:"\u7248\u672c"}),(0,r.jsx)(e.th,{children:"\u53d8\u66f4"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"brick_next"}),(0,r.jsx)(e.td,{children:"3.17.7"}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:":forEach"})," \u7684\u5b50\u8282\u70b9\u652f\u6301\u4f7f\u7528\u53d8\u91cf ",(0,r.jsx)(e.code,{children:"SIZE"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-"}),(0,r.jsx)(e.td,{children:"3.6.2"}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:":forEach"})," \u7684\u5b50\u8282\u70b9\u652f\u6301\u4f7f\u7528\u53d8\u91cf ",(0,r.jsx)(e.code,{children:"INDEX"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-"}),(0,r.jsx)(e.td,{children:"3.5.26"}),(0,r.jsxs)(e.td,{children:["\u652f\u6301\u751f\u547d\u5468\u671f ",(0,r.jsx)(e.code,{children:"onMount"})," \u548c ",(0,r.jsx)(e.code,{children:"onUnmount"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"-"}),(0,r.jsx)(e.td,{children:"3.0.0"}),(0,r.jsx)(e.td,{children:"\u65b0\u589e\u63a7\u5236\u8282\u70b9\u80fd\u529b"})]})]})]})]})}function h(n={}){const{wrapper:e}={...(0,s.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},1151:(n,e,c)=>{c.d(e,{Z:()=>d,a:()=>o});var r=c(7294);const s={},t=r.createContext(s);function o(n){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);
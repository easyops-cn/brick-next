"use strict";(globalThis.webpackChunknext_docs=globalThis.webpackChunknext_docs||[]).push([[9384],{6718:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var o=n(7294),r=n(6945),s=n(2748),i=n(6010),l=n(224),a=n(2243),c=n(1147);const u="slidesActive_vr0r",d="cursor_RM2z",m="added_ZxDw",f="modified_lx8A";var h=n(5893);(0,l.z2)(r),(0,a.z2)(r),(0,c.z2)(r);var g=function(e){return e[e.None=0]="None",e[e.Active=1]="Active",e[e.Finished=2]="Finished",e}(g||{});let p=0;r.languages.typescript.javascriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,lib:[]}),r.languages.typescript.typescriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,lib:[]});const C=(0,o.forwardRef)((function(e,t){let{files:n,currentFile:l,className:a,theme:c,typingEffectReady:C,onChange:S}=e;const b=(0,o.useRef)(),L=(0,o.useRef)(),w=(0,o.useMemo)((()=>new Map),[]),N=(0,o.useMemo)((()=>`${"workspace/"}${++p}`),[]),[R,E]=(0,o.useState)(g.None),x=(0,o.useMemo)((()=>new Set),[]),z=(0,o.useMemo)((()=>{let e=w.get(l);if(!e){var t;const o=n.find((e=>e.name===l));e=r.editor.createModel((null==(t=o.codeSlides)?void 0:t[0])??o.code,o.lang??"yaml",r.Uri.file(`${N}/${o.name}`)),w.set(l,e)}return e}),[l,w,n,N]);(0,o.useEffect)((()=>{c&&r.editor.setTheme(c)}),[c]),(0,o.useEffect)((()=>{L.current?L.current.setModel(z):(L.current=r.editor.create(b.current,{model:z,minimap:{enabled:!1},scrollBeyondLastLine:!1,tabSize:2,insertSpaces:!0,automaticLayout:!0,fontSize:13,lineHeight:s.CZ,scrollbar:{horizontalScrollbarSize:s.sE,verticalScrollbarSize:s.sE,horizontalSliderSize:8,verticalSliderSize:8,alwaysConsumeMouseWheel:!1},padding:{top:s.z5},overviewRulerBorder:!1,mouseWheelScrollSensitivity:.5,renderLineHighlight:"none"}),L.current.onKeyDown((e=>{if(e.equals(r.KeyMod.CtrlCmd|r.KeyCode.KeyK)){const t=new KeyboardEvent("keydown",{ctrlKey:e.ctrlKey,metaKey:e.metaKey,key:"k"});document.dispatchEvent(t)}})))}),[z]);const T=(0,o.useRef)();return(0,o.useEffect)((()=>{if(x.has(l))return;const e=n.find((e=>e.name===l));var t,o;e.highlightRanges&&(null==(t=L.current)||t.revealLineNearTop(e.highlightRanges[0][0],r.editor.ScrollType.Immediate),T.current=null==(o=L.current)?void 0:o.createDecorationsCollection(e.highlightRanges.map((e=>{let[t,n,o]=e;return{range:new r.Range(t,1,n,1),options:{isWholeLine:!0,linesDecorationsClassName:"modified"===o?f:m}}}))))}),[x,l,n]),(0,o.useImperativeHandle)(t,(()=>({resetScrollTop:()=>L.current.setScrollTop(0,r.editor.ScrollType.Immediate)})),[]),(0,o.useEffect)((()=>{const e=z.onDidChangeContent((()=>{var e;null==(e=T.current)||e.clear(),x.add(l),null==S||S(z.getValue(),l)}));return()=>{e.dispose()}}),[x,l,z,S]),(0,o.useEffect)((()=>{const e=n.find((e=>e.name===l));if(e.codeSlides&&C){L.current.focus(),E(g.Active);const t=L.current.createDecorationsCollection();(async function(e,t,n){return new Promise((o=>{const s=function(e){return v(e.slice(1).map((e=>v(e.split(""),20))),1e3)}(e);let i=0;const l=function(){const e=s[i],{lineNumber:n,column:c}=y(t),u=new r.Range(n,c,n,c);t.applyEdits([{range:u,text:e}]),a();const d=s[++i];d?(i++,setTimeout(l,d)):setTimeout(o,1e3)},a=function(){const{lineNumber:e,column:o}=y(t);n.set([{range:{startLineNumber:e,startColumn:o,endLineNumber:e,endColumn:o},options:{afterContentClassName:d}}])};a(),setTimeout(l,2e3)}))})(e.codeSlides,z,t).then((()=>{t.set([]),L.current.setPosition(y(z)),E(g.Finished)}))}}),[l,z,n,C]),(0,o.useEffect)((()=>{switch(R){case g.Active:L.current.updateOptions({readOnly:!0,domReadOnly:!0});break;case g.Finished:L.current.updateOptions({readOnly:!1,domReadOnly:!1})}}),[R]),(0,o.useEffect)((()=>()=>{L.current.dispose();for(const e of w.values())e.dispose()}),[]),(0,h.jsx)("div",{ref:b,className:(0,i.Z)(a,{[u]:R===g.Active})})}));function y(e){const t=e.getLineCount();return{lineNumber:t,column:e.getLineLength(t)+1}}function v(e){const t=[];let n=0;for(var o=arguments.length,r=new Array(o>1?o-1:0),s=1;s<o;s++)r[s-1]=arguments[s];for(;n<e.length;){const o=[].concat(e[n]).flat(1/0);t.push(...o),n++,n<e.length&&o.length>0&&t.push(...r)}return t}},2846:(e,t,n)=>{n.d(t,{w:()=>s});const o=new RegExp("\\b(MARK:\\s*)(.*)$"),r=/^-+|-+$/g;function s(e,t){let n=[];if(t.findRegionSectionHeaders&&t.foldingRules?.markers){const o=function(e,t){const n=[],o=e.getLineCount();for(let r=1;r<=o;r++){const o=e.getLineContent(r),s=o.match(t.foldingRules.markers.start);if(s){const e={startLineNumber:r,startColumn:s[0].length+1,endLineNumber:r,endColumn:o.length+1};if(e.endColumn>e.startColumn){const t={range:e,...l(o.substring(s[0].length)),shouldBeInComments:!1};(t.text||t.hasSeparatorLine)&&n.push(t)}}}return n}(e,t);n=n.concat(o)}if(t.findMarkSectionHeaders){const t=function(e){const t=[],n=e.getLineCount();for(let o=1;o<=n;o++){i(e.getLineContent(o),o,t)}return t}(e);n=n.concat(t)}return n}function i(e,t,n){o.lastIndex=0;const r=o.exec(e);if(r){const e=r.index+r[1].length+1,o={startLineNumber:t,startColumn:e,endLineNumber:t,endColumn:e+r[2].length};if(o.endColumn>o.startColumn){const e={range:o,...l(r[1]),shouldBeInComments:!0};(e.text||e.hasSeparatorLine)&&n.push(e)}}}function l(e){const t=(e=e.trim()).startsWith("-");return{text:e=e.replace(r,""),hasSeparatorLine:t}}}}]);
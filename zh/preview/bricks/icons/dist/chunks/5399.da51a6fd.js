"use strict";(globalThis.webpackChunk_next_bricks_icons=globalThis.webpackChunk_next_bricks_icons||[]).push([[5399],{5399:(e,t,r)=>{r.r(t),r.d(t,{BrickLoadError:()=>v,enqueueStableLoadBricks:()=>f,enqueueStableLoadProcessors:()=>p,flushStableLoadBricks:()=>d,loadBricksImperatively:()=>w,loadEditorsImperatively:()=>h,loadProcessorsImperatively:()=>m,loadScript:()=>o,loadSharedModule:()=>a,loadStyle:()=>i});const s=new Map;function n(e,t,r,o){if(Array.isArray(t))return Promise.all(t.map((t=>n(e,t,r))));const i=r&&!/^https?:/.test(t)?`${r}${t}`:t,a=s.get(i);if(a)return a;const c=new Promise(((t,r)=>{const s=()=>{window.dispatchEvent(new Event("request.end"))},n=document.createElement("style"===e?"link":"script");"script"===e?Object.assign(n,{type:"text/javascript",async:!0,...o,src:i}):Object.assign(n,{rel:"stylesheet",...o,href:i}),n.onload=()=>{t(i),s()},n.onerror=e=>{r(e),s()};const a=document.currentScript||document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a),window.dispatchEvent(new Event("request.start"))}));return s.set(i,c),c}function o(e,t,r){return n("script",e,t,r)}function i(e,t,r){return n("style",e,t,r)}async function a(e,t){await r.I("default");const s=window[e];return await s.init(r.S.default),(await s.get(t))()}let c,l=!1;const u=new Promise((e=>{c=e}));function d(){l||c()}function f(e,t){return $(g("bricks",e,t))}function p(e,t){return $(g("processors",e,t))}async function w(e,t){const r=g("bricks",e,t);return d(),$(r)}function m(e,t){const r=g("processors",e,t);return d(),$(r)}function h(e,t){const r=g("editors",e,t);return d(),$(r)}class v extends Error{constructor(e){super(e),this.name="BrickLoadError",Error.captureStackTrace&&Error.captureStackTrace(this,v)}}let k;const y="v2-adapter.load-bricks";function b(e,t,r){const s=new Map,n=new Set,o=t=>{var i;if(n.has(t))return;let a,c,l;if(n.add(t),"editors"===e){l=t;for(const e of r.values()){var u;null!==(u=e.propertyEditors??e.editors)&&void 0!==u&&u.some((e=>e===l))&&(a=e)}}else if("processors"===e||t.includes(".")){[c,l]=t.split(".");const s=`bricks/${"processors"===e?(p=c,p.replace(/[A-Z]/g,(e=>`-${e[0].toLocaleLowerCase()}`)).replace(/_[0-9]/g,(e=>`-${e[1]}`))):c}`;a=r.get(s)}else{let e;l=t;for(const s of r.values()){var d;if(null!==(d=s.elements)&&void 0!==d&&d.some((e=>e===l))){var f;if(null===(f=s.deprecatedElements)||void 0===f||!f.includes(t)){a=s;break}e=s}}!a&&e&&(a=e)}var p;if(!a)return void console.error(`Package for ${t} not found.`);let w=s.get(a);w||(w=[],s.set(a,w)),w.push({fullName:t,lastName:l});const m=null===(i=a.dependencies)||void 0===i?void 0:i[t];if(m)for(const e of m)o(e)};for(const e of t)o(e);return s}async function P(e,t,r){const s=`${"processors"===e||"editors"===e?`./${e}/`:"./"}${"editors"===e?r.fullName:r.lastName}`;try{await a(t,s)}catch(t){throw console.error(t),new v(`Load ${e} of "${r.fullName}" failed: ${null==t?void 0:t.message}`)}}function E(e,t,r){return t.map((async t=>(await o(t.filePath,window.PUBLIC_ROOT??""),await u,Promise.all(r.get(t).map((r=>P(e,t.id,r)))))))}async function g(e,t,r){const s=new Map;for(const e of r){const t=e.id||S(e.filePath);s.set(t,e)}const n=b(e,t,s);let i;const a=[],u=[];let d;for(const e of n.keys())if(e.id)"bricks/basic"===e.id?i=e:u.push(e);else if(a.push(e),d=s.get("bricks/v2-adapter"),!d)throw new Error("Using v2 bricks, but v2-adapter not found");const f=d;let p;const w=i;if(w){const t=o(w.filePath,window.PUBLIC_ROOT??"");l||(l=!0,t.then((()=>Promise.resolve())).then(c)),p=t.then((()=>Promise.all(n.get(w).map((t=>P(e,w.id,t))))))}const m=[p].concat(E(e,u,n));if(f&&a.length>0){if(!k){const e=b("bricks",[y],s),t=[...e.keys()];k=(async()=>(await Promise.all(E("bricks",t,e)),document.createElement(y)))()}m.push(k.then((t=>Promise.all(a.map((s=>{const o=S(s.filePath).split("/")[1];return t.resolve(f.filePath,"editors"===e?s.propertyEditorsJsFilePath??s.filePath:s.filePath,"bricks"===e?n.get(s).map((e=>`${o}.${e.lastName}`)):[],s.dll,r)}))))))}await Promise.all(m)}async function $(e){window.dispatchEvent(new Event("request.start"));try{await e}finally{window.dispatchEvent(new Event("request.end"))}}function S(e){return e.split("/").slice(0,2).join("/")}}}]);
//# sourceMappingURL=5399.da51a6fd.js.map
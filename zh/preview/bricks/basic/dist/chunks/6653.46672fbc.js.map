{"version":3,"file":"chunks/6653.46672fbc.js","mappings":"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","sources":["webpack:///../../node_modules/@next-core/loader/dist/esm/loadScriptOrStyle.js","webpack:///../../node_modules/@next-core/loader/dist/esm/loadScript.js","webpack:///../../node_modules/@next-core/loader/dist/esm/loadStyle.js","webpack:///../../node_modules/@next-core/loader/dist/esm/stableLoadBricks.js","webpack:///../../node_modules/@next-core/loader/dist/esm/loadSharedModule.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nvar cache = new Map();\nexport default function loadScriptOrStyle(type, src, prefix, attrs) {\n  if (Array.isArray(src)) {\n    return Promise.all(src.map(item => loadScriptOrStyle(type, item, prefix)));\n  }\n  var fixedSrc = prefix && !/^https?:/.test(src) ? \"\".concat(prefix).concat(src) : src;\n  var cachedPromise = cache.get(fixedSrc);\n  if (cachedPromise) {\n    return cachedPromise;\n  }\n  var promise = new Promise((resolve, reject) => {\n    var end = () => {\n      window.dispatchEvent(new Event(\"request.end\"));\n    };\n    var element = document.createElement(type === \"style\" ? \"link\" : \"script\");\n    if (type === \"script\") {\n      Object.assign(element, _objectSpread(_objectSpread({\n        type: \"text/javascript\",\n        async: true\n      }, attrs), {}, {\n        src: fixedSrc\n      }));\n    } else {\n      Object.assign(element, _objectSpread(_objectSpread({\n        rel: \"stylesheet\"\n      }, attrs), {}, {\n        href: fixedSrc\n      }));\n    }\n    element.onload = () => {\n      resolve(fixedSrc);\n      end();\n    };\n    element.onerror = e => {\n      reject(e);\n      end();\n    };\n    var firstScript = document.currentScript || document.getElementsByTagName(\"script\")[0];\n    firstScript.parentNode.insertBefore(element, firstScript);\n    window.dispatchEvent(new Event(\"request.start\"));\n  });\n  cache.set(fixedSrc, promise);\n  return promise;\n}\n//# sourceMappingURL=loadScriptOrStyle.js.map","import loadScriptOrStyle from \"./loadScriptOrStyle.js\";\nexport default function loadScript(src, prefix, attrs) {\n  return loadScriptOrStyle(\"script\", src, prefix, attrs);\n}\n//# sourceMappingURL=loadScript.js.map","import loadScriptOrStyle from \"./loadScriptOrStyle.js\";\nexport default function loadStyle(src, prefix, attrs) {\n  return loadScriptOrStyle(\"style\", src, prefix, attrs);\n}\n//# sourceMappingURL=loadStyle.js.map","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport loadScript from \"./loadScript.js\";\nimport loadSharedModule from \"./loadSharedModule.js\";\nvar resolveBasicPkg;\nvar basicPkgWillBeResolved = false;\nvar waitBasicPkg = new Promise(resolve => {\n  resolveBasicPkg = resolve;\n});\nexport function flushStableLoadBricks() {\n  if (!basicPkgWillBeResolved) {\n    resolveBasicPkg();\n  }\n}\n\n/**\n * When loading bundles with webpack module federation concurrently, if\n * these bundles share some modules, webpack will load a singleton module\n * if versions are matched. Webpack will use the first bundle who started\n * to init the shared scope. Generally which bundle to use for a specific\n * module, does not matter. However, it may cause flaky result since the\n * shared module may from different bundles which maybe not exactly the\n * same, especially developers declare dependencies incorrectly sometimes.\n * So in order to make it less flaky, we try to make a BASIC package takes\n * precedence over others. We will always load the shared modules from the\n * basic package bundle if it contains the shared modules.\n */\nexport function enqueueStableLoadBricks(bricks, brickPackages) {\n  var promise = enqueueStableLoad(\"bricks\", bricks, brickPackages);\n  return dispatchRequestStatus(promise);\n}\nexport function enqueueStableLoadProcessors(processors, brickPackages) {\n  var promise = enqueueStableLoad(\"processors\", processors, brickPackages);\n  return dispatchRequestStatus(promise);\n}\nexport function loadBricksImperatively(_x, _x2) {\n  return _loadBricksImperatively.apply(this, arguments);\n}\nfunction _loadBricksImperatively() {\n  _loadBricksImperatively = _asyncToGenerator(function* (bricks, brickPackages) {\n    var promise = enqueueStableLoad(\"bricks\", bricks, brickPackages);\n    flushStableLoadBricks();\n    return dispatchRequestStatus(promise);\n  });\n  return _loadBricksImperatively.apply(this, arguments);\n}\nexport function loadProcessorsImperatively(processors, brickPackages) {\n  var promise = enqueueStableLoad(\"processors\", processors, brickPackages);\n  flushStableLoadBricks();\n  return dispatchRequestStatus(promise);\n}\nvar v2AdapterPromise;\nvar V2_ADAPTER_LOAD_BRICKS = \"v2-adapter.load-bricks\";\n// Get brick/processor items including their dependencies\nfunction getItemsByPkg(type, list, brickPackagesMap) {\n  var itemsByPkg = new Map();\n  var listToLoad = new Set();\n  var add = item => {\n    var _pkg$dependencies;\n    if (listToLoad.has(item)) {\n      return;\n    }\n    listToLoad.add(item);\n    var pkg;\n    var namespace;\n    var lastName;\n    if (type === \"processors\" || item.includes(\".\")) {\n      [namespace, lastName] = item.split(\".\");\n      var pkgId = \"bricks/\".concat(type === \"processors\" ? getProcessorPackageName(namespace) : namespace);\n      pkg = brickPackagesMap.get(pkgId);\n    } else {\n      lastName = item;\n      for (var p of brickPackagesMap.values()) {\n        var _p$elements;\n        if ((_p$elements = p.elements) !== null && _p$elements !== void 0 && _p$elements.some(e => e === lastName)) {\n          pkg = p;\n          break;\n        }\n      }\n    }\n    if (!pkg) {\n      // eslint-disable-next-line no-console\n      console.error(\"Package for \".concat(item, \" not found.\"));\n      return;\n    }\n    var groupItems = itemsByPkg.get(pkg);\n    if (!groupItems) {\n      groupItems = [];\n      itemsByPkg.set(pkg, groupItems);\n    }\n    groupItems.push({\n      fullName: item,\n      lastName\n    });\n\n    // Load their dependencies too\n    var deps = (_pkg$dependencies = pkg.dependencies) === null || _pkg$dependencies === void 0 ? void 0 : _pkg$dependencies[item];\n    if (deps) {\n      for (var dep of deps) {\n        add(dep);\n      }\n    }\n  };\n  for (var item of list) {\n    add(item);\n  }\n  return itemsByPkg;\n}\nfunction loadBrickModule(_x3, _x4, _x5) {\n  return _loadBrickModule.apply(this, arguments);\n}\nfunction _loadBrickModule() {\n  _loadBrickModule = _asyncToGenerator(function* (type, pkgId, item) {\n    var moduleName = \"\".concat(type === \"processors\" ? \"./processors/\" : \"./\").concat(item.lastName);\n    try {\n      yield loadSharedModule(pkgId, moduleName);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n      throw new Error(\"Load \".concat(type, \" of \\\"\").concat(item.fullName, \"\\\" failed\"));\n    }\n  });\n  return _loadBrickModule.apply(this, arguments);\n}\nfunction loadRestBricks(type, pkgs, itemsMap) {\n  return pkgs.map( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (pkg) {\n      var _window$PUBLIC_ROOT;\n      yield loadScript(pkg.filePath, (_window$PUBLIC_ROOT = window.PUBLIC_ROOT) !== null && _window$PUBLIC_ROOT !== void 0 ? _window$PUBLIC_ROOT : \"\");\n      yield waitBasicPkg;\n      return Promise.all(\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      itemsMap.get(pkg).map(item => loadBrickModule(type, pkg.id, item)));\n    });\n    return function (_x6) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}\nfunction enqueueStableLoad(_x7, _x8, _x9) {\n  return _enqueueStableLoad.apply(this, arguments);\n}\nfunction _enqueueStableLoad() {\n  _enqueueStableLoad = _asyncToGenerator(function* (type, list, brickPackages) {\n    var brickPackagesMap = new Map();\n    for (var pkg of brickPackages) {\n      var _pkg$id;\n      var pkgId = (_pkg$id = pkg.id) !== null && _pkg$id !== void 0 ? _pkg$id : getPkgIdByFilePath(pkg.filePath);\n      brickPackagesMap.set(pkgId, pkg);\n    }\n    var itemsByPkg = getItemsByPkg(type, list, brickPackagesMap);\n    var foundBasicPkg;\n    var v2Packages = [];\n    var v3PackagesOtherThanBasic = [];\n    var maybeV2Adapter;\n    for (var _pkg of itemsByPkg.keys()) {\n      if (_pkg.id) {\n        if (_pkg.id === \"bricks/basic\") {\n          foundBasicPkg = _pkg;\n        } else {\n          v3PackagesOtherThanBasic.push(_pkg);\n        }\n      } else {\n        // Brick packages of v2 has no `id`\n        v2Packages.push(_pkg);\n        maybeV2Adapter = brickPackagesMap.get(\"bricks/v2-adapter\");\n        if (!maybeV2Adapter) {\n          // eslint-disable-next-line no-console\n          console.error(\"Using v2 bricks, but v2-adapter not found\");\n        }\n      }\n    }\n    var v2Adapter = maybeV2Adapter;\n    var basicPkgPromise;\n    var basicPkg = foundBasicPkg;\n    if (basicPkg) {\n      var _window$PUBLIC_ROOT2;\n      var tempPromise = loadScript(basicPkg.filePath, (_window$PUBLIC_ROOT2 = window.PUBLIC_ROOT) !== null && _window$PUBLIC_ROOT2 !== void 0 ? _window$PUBLIC_ROOT2 : \"\");\n      // Packages other than BASIC will wait for an extra micro-task tick.\n      if (!basicPkgWillBeResolved) {\n        basicPkgWillBeResolved = true;\n        tempPromise.then(() => Promise.resolve()).then(resolveBasicPkg);\n      }\n      basicPkgPromise = tempPromise.then(() => Promise.all(\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      itemsByPkg.get(basicPkg).map(item => loadBrickModule(type, basicPkg.id, item))));\n    }\n    var pkgPromises = [basicPkgPromise].concat(loadRestBricks(type, v3PackagesOtherThanBasic, itemsByPkg));\n    if (v2Adapter && v2Packages.length > 0) {\n      if (!v2AdapterPromise) {\n        // Load `v2-adapter.load-bricks` and its dependencies\n        var v2AdapterItemsByPkg = getItemsByPkg(\"bricks\", [V2_ADAPTER_LOAD_BRICKS], brickPackagesMap);\n        var v2AdapterPackages = [...v2AdapterItemsByPkg.keys()];\n        var loadV2Adapter = /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator(function* () {\n            yield Promise.all(loadRestBricks(\"bricks\", v2AdapterPackages, v2AdapterItemsByPkg));\n            return document.createElement(V2_ADAPTER_LOAD_BRICKS);\n          });\n          return function loadV2Adapter() {\n            return _ref2.apply(this, arguments);\n          };\n        }();\n        v2AdapterPromise = loadV2Adapter();\n      }\n      pkgPromises.push(v2AdapterPromise.then(adapter => Promise.all(v2Packages.map(pkg => {\n        var pkgId = getPkgIdByFilePath(pkg.filePath);\n        var pkgNamespace = pkgId.split(\"/\")[1];\n        return adapter.resolve(v2Adapter.filePath, pkg.filePath, type === \"bricks\" ?\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        itemsByPkg.get(pkg).map(item => \"\".concat(pkgNamespace, \".\").concat(item.lastName)) : [], pkg.dll,\n        // Todo: remove `brickPackages` as an argument\n        brickPackages);\n      }))));\n    }\n    yield Promise.all(pkgPromises);\n  });\n  return _enqueueStableLoad.apply(this, arguments);\n}\nfunction dispatchRequestStatus(_x10) {\n  return _dispatchRequestStatus.apply(this, arguments);\n}\nfunction _dispatchRequestStatus() {\n  _dispatchRequestStatus = _asyncToGenerator(function* (promise) {\n    window.dispatchEvent(new Event(\"request.start\"));\n    try {\n      yield promise;\n    } finally {\n      window.dispatchEvent(new Event(\"request.end\"));\n    }\n  });\n  return _dispatchRequestStatus.apply(this, arguments);\n}\nfunction getProcessorPackageName(camelPackageName) {\n  return camelPackageName.replace(/[A-Z]/g, match => \"-\".concat(match[0].toLocaleLowerCase())).replace(/_[0-9]/g, match => \"-\".concat(match[1]));\n}\nfunction getPkgIdByFilePath(filePath) {\n  return filePath.split(\"/\").slice(0, 2).join(\"/\");\n}\n//# sourceMappingURL=stableLoadBricks.js.map","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\n// https://github.com/module-federation/module-federation-examples/blob/eda9493f3991a423479fd834cfb1d7b241d9d1f0/advanced-api/dynamic-remotes/app1/src/App.js\nexport default function loadSharedModule(_x, _x2) {\n  return _loadSharedModule.apply(this, arguments);\n}\nfunction _loadSharedModule() {\n  _loadSharedModule = _asyncToGenerator(function* (scope, module) {\n    // Initializes the share scope. This fills it with known provided modules from this build and all remotes\n    yield __webpack_init_sharing__(\"default\");\n    var container = window[scope]; // or get the container somewhere else\n    // Initialize the container, it may provide shared modules\n    yield container.init(__webpack_share_scopes__.default);\n    var factory = yield container.get(module);\n    return factory();\n  });\n  return _loadSharedModule.apply(this, arguments);\n}\n//# sourceMappingURL=loadSharedModule.js.map"],"names":["cache","Map","loadScriptOrStyle","type","src","prefix","attrs","Array","isArray","Promise","all","map","item","fixedSrc","test","concat","cachedPromise","get","promise","resolve","reject","end","window","dispatchEvent","Event","element","document","createElement","Object","assign","async","rel","href","onload","onerror","e","firstScript","currentScript","getElementsByTagName","parentNode","insertBefore","set","loadScript","loadStyle","resolveBasicPkg","loadSharedModule","_x","_x2","_loadSharedModule","apply","this","arguments","scope","module","container","init","default","v2AdapterPromise","basicPkgWillBeResolved","waitBasicPkg","flushStableLoadBricks","enqueueStableLoadBricks","bricks","brickPackages","dispatchRequestStatus","enqueueStableLoad","enqueueStableLoadProcessors","processors","loadBricksImperatively","_loadBricksImperatively","loadProcessorsImperatively","V2_ADAPTER_LOAD_BRICKS","getItemsByPkg","list","brickPackagesMap","itemsByPkg","listToLoad","Set","add","_pkg$dependencies","has","pkg","namespace","lastName","includes","split","pkgId","replace","match","toLocaleLowerCase","p","values","_p$elements","elements","some","groupItems","push","fullName","deps","dependencies","dep","console","error","loadBrickModule","_x3","_x4","_x5","_loadBrickModule","moduleName","Error","loadRestBricks","pkgs","itemsMap","_ref","_window$PUBLIC_ROOT","filePath","PUBLIC_ROOT","id","_x6","_x7","_x8","_x9","_enqueueStableLoad","_pkg$id","getPkgIdByFilePath","foundBasicPkg","maybeV2Adapter","v2Packages","v3PackagesOtherThanBasic","_pkg","keys","basicPkgPromise","v2Adapter","basicPkg","_window$PUBLIC_ROOT2","tempPromise","then","pkgPromises","length","v2AdapterItemsByPkg","v2AdapterPackages","loadV2Adapter","_ref2","adapter","pkgNamespace","dll","_x10","_dispatchRequestStatus","slice","join"],"sourceRoot":""}
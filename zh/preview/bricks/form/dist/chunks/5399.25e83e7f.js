"use strict";(globalThis.webpackChunk_next_bricks_form=globalThis.webpackChunk_next_bricks_form||[]).push([[5399],{5399:(e,t,r)=>{r.r(t),r.d(t,{BrickLoadError:()=>v,enqueueStableLoadBricks:()=>f,enqueueStableLoadProcessors:()=>p,flushStableLoadBricks:()=>d,loadBricksImperatively:()=>m,loadEditorsImperatively:()=>h,loadProcessorsImperatively:()=>w,loadScript:()=>o,loadSharedModule:()=>i,loadStyle:()=>a});const s=new Map;function n(e,t,r,o){if(Array.isArray(t))return Promise.all(t.map((t=>n(e,t,r))));const a=r&&!/^https?:/.test(t)?`${r}${t}`:t,i=s.get(a);if(i)return i;const c=new Promise(((t,r)=>{const s=()=>{window.dispatchEvent(new Event("request.end"))},n=document.createElement("style"===e?"link":"script");"script"===e?Object.assign(n,{type:"text/javascript",async:!0,...o,src:a}):Object.assign(n,{rel:"stylesheet",...o,href:a}),n.onload=()=>{t(a),s()},n.onerror=e=>{r(e),s()};const i=document.currentScript||document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),window.dispatchEvent(new Event("request.start"))}));return s.set(a,c),c}function o(e,t,r){return n("script",e,t,r)}function a(e,t,r){return n("style",e,t,r)}async function i(e,t){await r.I("default");const s=window[e];return await s.init(r.S.default),(await s.get(t))()}let c,l=!1;const u=new Promise((e=>{c=e}));function d(){l||c()}function f(e,t){return $(g("bricks",e,t))}function p(e,t){return $(g("processors",e,t))}async function m(e,t){const r=g("bricks",e,t);return d(),$(r)}function w(e,t){const r=g("processors",e,t);return d(),$(r)}function h(e,t){const r=g("editors",e,t);return d(),$(r)}class v extends Error{constructor(e){super(e),this.name="BrickLoadError",Error.captureStackTrace&&Error.captureStackTrace(this,v)}}let k;const y="v2-adapter.load-bricks";function b(e,t,r){const s=new Map,n=new Set,o=t=>{var a;if(n.has(t))return;let i,c,l;if(n.add(t),"editors"===e){l=t;for(const e of r.values()){var u;null!==(u=e.propertyEditors??e.editors)&&void 0!==u&&u.some((e=>e===l))&&(i=e)}}else if("processors"===e||t.includes(".")){[c,l]=t.split(".");const s=`bricks/${"processors"===e?(p=c,p.replace(/[A-Z]/g,(e=>`-${e[0].toLocaleLowerCase()}`)).replace(/_[0-9]/g,(e=>`-${e[1]}`))):c}`;i=r.get(s)}else{let e;l=t;for(const s of r.values()){var d;if(null!==(d=s.elements)&&void 0!==d&&d.some((e=>e===l))){var f;if(null===(f=s.deprecatedElements)||void 0===f||!f.includes(t)){i=s;break}e=s}}!i&&e&&(i=e)}var p;if(!i)return void console.error(`Package for ${t} not found.`);let m=s.get(i);m||(m=[],s.set(i,m)),m.push({fullName:t,lastName:l});const w=null===(a=i.dependencies)||void 0===a?void 0:a[t];if(w)for(const e of w)o(e)};for(const e of t)o(e);return s}async function P(e,t,r){const s=`${"processors"===e||"editors"===e?`./${e}/`:"./"}${"editors"===e?r.fullName:r.lastName}`;try{await i(t,s)}catch(t){throw console.error(t),new v(`Load ${e} of "${r.fullName}" failed: ${null==t?void 0:t.message}`)}}function E(e,t,r){return t.map((async t=>(await o(t.filePath,window.PUBLIC_ROOT??""),await u,Promise.all(r.get(t).map((r=>P(e,t.id,r)))))))}async function g(e,t,r){const s=new Map;for(const e of r){const t=e.id||S(e.filePath);s.set(t,e)}const n=b(e,t,s);let a;const i=[],u=[];let d;for(const e of n.keys())if(e.id)"bricks/basic"===e.id?a=e:u.push(e);else if(i.push(e),d=s.get("bricks/v2-adapter"),!d)throw new Error("Using v2 bricks, but v2-adapter not found");const f=d;let p;const m=a;if(m){const t=o(m.filePath,window.PUBLIC_ROOT??"");l||(l=!0,t.then((()=>Promise.resolve())).then(c)),p=t.then((()=>Promise.all(n.get(m).map((t=>P(e,m.id,t))))))}const w=[p].concat(E(e,u,n));if(f&&i.length>0){if(!k){const e=b("bricks",[y],s),t=[...e.keys()];k=(async()=>(await Promise.all(E("bricks",t,e)),document.createElement(y)))()}w.push(k.then((t=>Promise.all(i.map((s=>{const o=S(s.filePath).split("/")[1];return t.resolve(f.filePath,"editors"===e?s.propertyEditorsJsFilePath??s.filePath:s.filePath,"bricks"===e?n.get(s).map((e=>`${o}.${e.lastName}`)):[],s.dll,r)}))))))}await Promise.all(w)}async function $(e){window.dispatchEvent(new Event("request.start"));try{await e}finally{window.dispatchEvent(new Event("request.end"))}}function S(e){return e.split("/").slice(0,2).join("/")}}}]);
//# sourceMappingURL=5399.25e83e7f.js.map
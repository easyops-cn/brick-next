"use strict";(globalThis.webpackChunknext_docs=globalThis.webpackChunknext_docs||[]).push([[9114],{8605:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>o});var t=i(5893),s=i(1151);const l={title:"\u56fd\u9645\u5316"},c=void 0,r={id:"concepts/i18n",title:"\u56fd\u9645\u5316",description:"Brick Next \u7684\u56fd\u9645\u5316\u57fa\u4e8e i18next \u5b9e\u73b0\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/concepts/i18n.md",sourceDirName:"concepts",slug:"/concepts/i18n",permalink:"/zh/docs/concepts/i18n",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"\u56fd\u9645\u5316"},sidebar:"docsSidebar",previous:{title:"\u6d4f\u89c8\u5668\u4f1a\u8bdd\u5386\u53f2",permalink:"/zh/docs/concepts/history"},next:{title:"\u5360\u4f4d\u7b26",permalink:"/zh/docs/concepts/placeholders"}},a={},o=[{value:"\u5fae\u5e94\u7528\u7684\u56fd\u9645\u5316\u914d\u7f6e",id:"i18n-in-micro-apps",level:2},{value:"\u81ea\u52a8\u5bfc\u5165",id:"i18n-auto-import",level:3},{value:"\u5fae\u5e94\u7528\u540d\u79f0",id:"i18n-micro-app-name",level:3},{value:"\u8fd0\u884c\u65f6\u6570\u636e",id:"i18n-at-run-time",level:3},{value:"\u6784\u4ef6\u7684\u56fd\u9645\u5316\u914d\u7f6e",id:"i18n-in-bricks",level:2},{value:"\u5728 React \u7ec4\u4ef6\u4e2d\u4f7f\u7528\u56fd\u9645\u5316",id:"i18n-with-react",level:3},{value:"\u5728\u975e React \u7ec4\u4ef6\u4e2d\u4f7f\u7528\u56fd\u9645\u5316",id:"i18n-with-non-react",level:3},{value:"\u590d\u7528\u56fd\u9645\u5316",id:"i18n-reuse",level:3},{value:"\u9ad8\u7ea7",id:"advanced",level:2},{value:"\u63d2\u503c",id:"interpolation",level:3},{value:"\u590d\u6570",id:"plurals",level:3}];function d(n){const e={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:["Brick Next \u7684\u56fd\u9645\u5316\u57fa\u4e8e ",(0,t.jsx)(e.a,{href:"https://www.i18next.com/",children:"i18next"})," \u5b9e\u73b0\u3002"]}),"\n",(0,t.jsx)(e.h2,{id:"i18n-in-micro-apps",children:"\u5fae\u5e94\u7528\u7684\u56fd\u9645\u5316\u914d\u7f6e"}),"\n",(0,t.jsxs)(e.p,{children:["\u8981\u4e3a\u5fae\u5e94\u7528\u914d\u7f6e\u56fd\u9645\u5316\u4fe1\u606f\uff0c\u9996\u5148\uff0c\u5728 Visual Builder \u7684 ",(0,t.jsx)(e.em,{children:"I18n"})," \u83dc\u5355\u4e2d\u914d\u7f6e\u7ffb\u8bd1\u8868\uff0c\u4f8b\u5982\uff1a"]}),"\n",(0,t.jsx)(e.p,{children:"\u7136\u540e\u5728\u7f16\u6392\u4e2d\u901a\u8fc7\u8868\u8fbe\u5f0f\u8c03\u7528\u76f8\u5173\u7684 API \u6839\u636e\u7528\u6237\u5f53\u524d\u9009\u62e9\u7684\u8bed\u8a00\u5730\u533a\u6765\u663e\u793a\u5bf9\u5e94\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"brick: eo-button\nproperties:\n  buttonName: '<% I18N(\"BTN_SUBMIT\") %>'\n"})}),"\n",(0,t.jsx)(e.h3,{id:"i18n-auto-import",children:"\u81ea\u52a8\u5bfc\u5165"}),"\n",(0,t.jsxs)(e.p,{children:["\u6709\u65f6\u5019\u6211\u4eec\u4f1a\u5148\u8fdb\u884c\u5fae\u5e94\u7528\u7684\u7f16\u6392\uff0c\u540e\u8fdb\u884c\u56fd\u9645\u5316\u914d\u7f6e\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 i18next \u63d0\u4f9b\u7684",(0,t.jsx)(e.a,{href:"https://www.i18next.com/translation-function/essentials#passing-a-default-value",children:"\u9ed8\u8ba4\u503c"}),"\u80fd\u529b\u3002"]}),"\n",(0,t.jsx)(e.p,{children:"\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u4e0d\u7528\u4e8b\u5148\u58f0\u660e\u7ffb\u8bd1\u8868\uff0c\u5728\u7f16\u6392\u4e2d\u76f4\u63a5\u4f7f\u7528\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'- brick: eo-button\n  properties:\n    buttonName: \'<% I18N("BTN_RESET", "\u91cd\u7f6e") %>\'\n- brick: eo-button\n  properties:\n    buttonName: \'<% I18N("BTN_SUBMIT", "\u63d0\u4ea4") %>\'\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u5229\u7528\u9ed8\u8ba4\u503c\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u884c\u7f16\u6392\u5fae\u5e94\u7528\uff0c\u4ee5\u5e94\u5bf9\u7f16\u6392\u524d\u671f\u7684\u9891\u7e41\u8c03\u6574\uff0c\u5e76\u5feb\u901f\u4ea4\u4ed8 MVP \u7248\u672c\u3002"}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u5fae\u5e94\u7528\u8d8b\u4e8e\u7a33\u5b9a\uff0c\u51c6\u5907\u53d1\u5e03\u516c\u5f00\u7248\u672c\u65f6\uff0c\u518d\u901a\u8fc7 Next Builder \u63d0\u4f9b\u7684\u81ea\u52a8\u5bfc\u5165\u529f\u80fd\uff0c\u5feb\u901f\u751f\u6210\u7ffb\u8bd1\u8868\u3002"}),"\n",(0,t.jsxs)(e.p,{children:["\u70b9\u51fb\u754c\u9762\u53f3\u4e0a\u89d2\u7684\u201c\u81ea\u52a8\u5bfc\u5165\u201d\u6309\u94ae\uff0c\u7cfb\u7edf\u5c06\u81ea\u52a8\u626b\u63cf\u5fae\u5e94\u7528\u4e2d\u5bf9 ",(0,t.jsx)(e.code,{children:"I18N(...)"})," \u7684\u8c03\u7528\uff0c\u751f\u6210\u4e00\u5f20\u7ffb\u8bd1\u8868\uff1a"]}),"\n",(0,t.jsx)(e.p,{children:"\u6700\u540e\u6309\u9700\u8865\u5145\u5176\u4ed6\u8bed\u8a00\u7684\u7ffb\u8bd1\u5373\u53ef\u3002"}),"\n",(0,t.jsx)(e.admonition,{type:"note",children:(0,t.jsxs)(e.p,{children:["\u6bcf\u4e2a\u5fae\u5e94\u7528\u4f7f\u7528\u81ea\u5df1\u72ec\u7acb\u7684 ",(0,t.jsx)(e.a,{href:"https://www.i18next.com/principles/namespaces",children:"namespace"}),"\uff0c\u56e0\u6b64 Key \u53ea\u9700\u5728\u6bcf\u4e2a\u5fae\u5e94\u7528\u5185\u552f\u4e00\u5373\u53ef\u3002"]})}),"\n",(0,t.jsx)(e.h3,{id:"i18n-micro-app-name",children:"\u5fae\u5e94\u7528\u540d\u79f0"}),"\n",(0,t.jsxs)(e.p,{children:["\u5fae\u5e94\u7528\u540d\u79f0\u7684\u56fd\u9645\u5316\u9700\u8981\u5728\u5e94\u7528\u7f16\u8f91\u9875\u9762\u914d\u7f6e ",(0,t.jsx)(e.code,{children:"Locales"})," \u5c5e\u6027\uff0c\u4f8b\u5982\uff1a"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"en:\n  name: Demo\nzh:\n  name: \u793a\u4f8b\n"})}),"\n",(0,t.jsx)(e.h3,{id:"i18n-at-run-time",children:"\u8fd0\u884c\u65f6\u6570\u636e"}),"\n",(0,t.jsx)(e.p,{children:"\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u5bf9\u8fd0\u884c\u65f6\u6570\u636e\u8fdb\u884c\u56fd\u9645\u5316\u8f6c\u5316\u3002\u4f8b\u5982\u7ed9\u5b9a\u6570\u636e\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'data:\n  title:\n    en: "Settings"\n    zh: "\u8bbe\u7f6e"\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u901a\u8fc7\u8868\u8fbe\u5f0f ",(0,t.jsx)(e.code,{children:"<% I18N_TEXT(data.title) %>"})," \u5373\u53ef\u6839\u636e\u5f53\u524d\u8bed\u8a00\u8bbe\u7f6e\u5f97\u5230\u5bf9\u5e94\u7684 ",(0,t.jsx)(e.code,{children:'"Settings"'})," \u6216 ",(0,t.jsx)(e.code,{children:'"\u8bbe\u7f6e"'}),"\u3002"]}),"\n",(0,t.jsx)(e.h2,{id:"i18n-in-bricks",children:"\u6784\u4ef6\u7684\u56fd\u9645\u5316\u914d\u7f6e"}),"\n",(0,t.jsx)(e.p,{children:"\u5728 v3 \u67b6\u6784\u4e0b\uff0c\u6bcf\u4e2a\u6784\u4ef6\u90fd\u662f\u4e92\u76f8\u72ec\u7acb\u7684\uff0c\u56e0\u6b64\u56fd\u9645\u5316\u4e5f\u6309\u5355\u4e2a\u6784\u4ef6\u8fdb\u884c\u914d\u7f6e\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"bricks/*/\n  src/\n    say-hello/\n      index.tsx    # \u6784\u4ef6\u4ee3\u7801\n      i18n.ts      # \u6784\u4ef6\u56fd\u9645\u5316\u914d\u7f6e\n"})}),"\n",(0,t.jsx)(e.h3,{id:"i18n-with-react",children:"\u5728 React \u7ec4\u4ef6\u4e2d\u4f7f\u7528\u56fd\u9645\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",metastring:"{4,5,7,19,22}",children:'import React from "react";\nimport { createDecorators } from "@next-core/element";\nimport { ReactNextElement } from "@next-core/react-element";\nimport { useTranslation, initializeReactI18n } from "@next-core/i18n/react";\nimport { K, NS, locales } from "./i18n.js";\n\ninitializeReactI18n(NS, locales);\n\nconst { defineElement } = createDecorators();\n\n@defineElement("demo-basic.say-hello")\nclass SayHello extends ReactNextElement {\n  render() {\n    return <SayHelloComponent />;\n  }\n}\n\nexport function SayHelloComponent() {\n  const { t } = useTranslation(NS);\n  return (\n    <div>\n      {t(K.HELLO)},{t(K.WORLD)}\n    </div>\n  );\n}\n\nexport { SayHello };\n'})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'export enum K {\n  HELLO = "HELLO",\n  WORLD = "WORLD",\n}\n\nconst en: Locale = {\n  HELLO: "Hello",\n  WORLD: "World",\n};\n\nconst zh: Locale = {\n  HELLO: "\u4f60\u597d",\n  WORLD: "\u4e16\u754c",\n};\n\nexport const NS = "bricks/demo-basic/say-hello";\n\nexport const locales = { en, zh };\n\ntype Locale = { [key in K]: string };\n'})}),"\n",(0,t.jsx)(e.h3,{id:"i18n-with-non-react",children:"\u5728\u975e React \u7ec4\u4ef6\u4e2d\u4f7f\u7528\u56fd\u9645\u5316"}),"\n",(0,t.jsx)(e.p,{children:"\u5728\u975e React \u7ec4\u4ef6\u4e2d\u4f7f\u7528\u56fd\u9645\u5316\u4e0e\u4e0a\u8ff0\u793a\u4f8b\u7c7b\u4f3c\uff0c\u6709\u5c11\u8bb8\u5dee\u522b\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'import { i18n, initialize18n } from "@next-core/i18n";\nimport { K, NS, locales } from "./i18n.js";\n\ninitialize18n(NS, locales);\nconst t = i18n.getFixedT(null, NS);\n\nconsole.log(t(K.HELLO));\n'})}),"\n",(0,t.jsx)(e.h3,{id:"i18n-reuse",children:"\u590d\u7528\u56fd\u9645\u5316"}),"\n",(0,t.jsxs)(e.p,{children:["\u5982\u679c\u6709\u5fc5\u8981\uff0c\u67d0\u4e2a\u6784\u4ef6\u60f3\u8981\u590d\u7528\u540c\u4e00\u4e2a\u6784\u4ef6\u5305\u5185\u7684\u5176\u4ed6\u6784\u4ef6\u7684\u56fd\u9645\u5316\u914d\u7f6e\uff0c\u53ef\u4ee5 ",(0,t.jsx)(e.code,{children:"import"})," \u76f8\u5173\u6587\u4ef6\u5e76\u6267\u884c\u521d\u59cb\u5316\u5373\u53ef\u3002\u4f8b\u5982\uff1a"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-tsx",children:'// ../say-goodbye/index.tsx\nimport { K, NS, locales } from "./i18n.js";\nimport { K as K2, NS as NS2, locales as locales2 } from "../say-hello/i18n.js";\n\ninitializeReactI18n(NS, locales);\ninitializeReactI18n(NS2, locales2);\n\nexport function SayGoodbyeComponent() {\n  const { t } = useTranslation(NS);\n  const { t: t2 } = useTranslation(NS2);\n  return (\n    <div>\n      {t(K.GOODBYE)},{t2(K2.WORLD)}\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"advanced",children:"\u9ad8\u7ea7"}),"\n",(0,t.jsx)(e.h3,{id:"interpolation",children:"\u63d2\u503c"}),"\n",(0,t.jsxs)(e.p,{children:["\u6709\u65f6\u5019\u4e00\u6bb5\u6587\u672c\u4f1a\u5305\u542b\u53d8\u91cf\uff0c\u5e76\u4e14\u4e0d\u540c\u8bed\u8a00\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u7ec4\u7ec7\u65b9\u5f0f\uff0c\u8fd9\u65f6\u53ef\u4ee5\u4f7f\u7528",(0,t.jsx)(e.a,{href:"https://www.i18next.com/translation-function/interpolation",children:"\u63d2\u503c"}),"\u5b9e\u73b0\uff1a"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'# Translations:\nMODEL_MANAGEMENT:\n  zh: "{{ modelName }}\u7ba1\u7406"\n  en: "{{ modelName }} management"\n\n# Usage:\nbrick: eo-page-title\nproperties:\n  pageTitle: \'<% I18N("MODEL_MANAGEMENT", { modelName: CTX.myModelName }) %>\'\n'})}),"\n",(0,t.jsx)(e.h3,{id:"plurals",children:"\u590d\u6570"}),"\n",(0,t.jsxs)(e.p,{children:["\u6709\u4e9b\u8bed\u8a00\uff08\u4f8b\u5982\u82f1\u8bed\uff09",(0,t.jsx)(e.a,{href:"https://www.i18next.com/translation-function/plurals",children:"\u590d\u6570"}),"\u4f1a\u6709\u8bcd\u5f62\u53d8\u5316\uff1a"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'# Translations:\nTOTAL_ITEMS:\n  zh: "\u5171 {{ modelName }} \u9879"\n  en: "{{ count }} item"\nTOTAL_ITEMS_plural:\n  en: "{{ count }} items"\n\n# Usage:\nbrick: div\nproperties:\n  textContent: \'<% I18N("TOTAL_ITEMS", { count: CTX.itemsCount }) %>\'\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u66f4\u591a\u590d\u6570\u914d\u7f6e\u65b9\u5f0f\u8bf7\u53c2\u8003 i18next \u7684",(0,t.jsx)(e.a,{href:"https://www.i18next.com/translation-function/plurals",children:"\u76f8\u5173\u6587\u6863"}),"\u3002"]})]})}function p(n={}){const{wrapper:e}={...(0,s.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},1151:(n,e,i)=>{i.d(e,{Z:()=>r,a:()=>c});var t=i(7294);const s={},l=t.createContext(s);function c(n){const e=t.useContext(l);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:c(n.components),t.createElement(l.Provider,{value:e},n.children)}}}]);
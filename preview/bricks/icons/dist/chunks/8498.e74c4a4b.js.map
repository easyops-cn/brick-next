{"version":3,"file":"chunks/8498.e74c4a4b.js","mappings":"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","sources":["webpack:///../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///../../node_modules/@next-core/loader/dist/esm/loadScriptOrStyle.js","webpack:///../../node_modules/@next-core/loader/dist/esm/loadScript.js","webpack:///../../node_modules/@next-core/loader/dist/esm/loadStyle.js","webpack:///../../node_modules/@next-core/loader/dist/esm/stableLoadBricks.js","webpack:///../../node_modules/@next-core/loader/dist/esm/loadSharedModule.js"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nexport default function _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nvar cache = new Map();\nexport default function loadScriptOrStyle(type, src, prefix, attrs) {\n  if (Array.isArray(src)) {\n    return Promise.all(src.map(item => loadScriptOrStyle(type, item, prefix)));\n  }\n  var fixedSrc = prefix && !/^https?:/.test(src) ? \"\".concat(prefix).concat(src) : src;\n  var cachedPromise = cache.get(fixedSrc);\n  if (cachedPromise) {\n    return cachedPromise;\n  }\n  var promise = new Promise((resolve, reject) => {\n    var end = () => {\n      window.dispatchEvent(new Event(\"request.end\"));\n    };\n    var element = document.createElement(type === \"style\" ? \"link\" : \"script\");\n    if (type === \"script\") {\n      Object.assign(element, _objectSpread(_objectSpread({\n        type: \"text/javascript\",\n        async: true\n      }, attrs), {}, {\n        src: fixedSrc\n      }));\n    } else {\n      Object.assign(element, _objectSpread(_objectSpread({\n        rel: \"stylesheet\"\n      }, attrs), {}, {\n        href: fixedSrc\n      }));\n    }\n    element.onload = () => {\n      resolve(fixedSrc);\n      end();\n    };\n    element.onerror = e => {\n      reject(e);\n      end();\n    };\n    var firstScript = document.currentScript || document.getElementsByTagName(\"script\")[0];\n    firstScript.parentNode.insertBefore(element, firstScript);\n    window.dispatchEvent(new Event(\"request.start\"));\n  });\n  cache.set(fixedSrc, promise);\n  return promise;\n}\n//# sourceMappingURL=loadScriptOrStyle.js.map","import loadScriptOrStyle from \"./loadScriptOrStyle.js\";\nexport default function loadScript(src, prefix, attrs) {\n  return loadScriptOrStyle(\"script\", src, prefix, attrs);\n}\n//# sourceMappingURL=loadScript.js.map","import loadScriptOrStyle from \"./loadScriptOrStyle.js\";\nexport default function loadStyle(src, prefix, attrs) {\n  return loadScriptOrStyle(\"style\", src, prefix, attrs);\n}\n//# sourceMappingURL=loadStyle.js.map","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport loadScript from \"./loadScript.js\";\nimport loadSharedModule from \"./loadSharedModule.js\";\nvar resolveBasicPkg;\nvar basicPkgWillBeResolved = false;\nvar waitBasicPkg = new Promise(resolve => {\n  resolveBasicPkg = resolve;\n});\nexport function flushStableLoadBricks() {\n  if (!basicPkgWillBeResolved) {\n    resolveBasicPkg();\n  }\n}\n\n/**\n * When loading bundles with webpack module federation concurrently, if\n * these bundles share some modules, webpack will load a singleton module\n * if versions are matched. Webpack will use the first bundle who started\n * to init the shared scope. Generally which bundle to use for a specific\n * module, does not matter. However, it may cause flaky result since the\n * shared module may from different bundles which maybe not exactly the\n * same, especially developers declare dependencies incorrectly sometimes.\n * So in order to make it less flaky, we try to make a BASIC package takes\n * precedence over others. We will always load the shared modules from the\n * basic package bundle if it contains the shared modules.\n */\nexport function enqueueStableLoadBricks(bricks, brickPackages) {\n  var promise = enqueueStableLoad(\"bricks\", bricks, brickPackages);\n  return dispatchRequestStatus(promise);\n}\nexport function enqueueStableLoadProcessors(processors, brickPackages) {\n  var promise = enqueueStableLoad(\"processors\", processors, brickPackages);\n  return dispatchRequestStatus(promise);\n}\nexport function loadBricksImperatively(_x, _x2) {\n  return _loadBricksImperatively.apply(this, arguments);\n}\nfunction _loadBricksImperatively() {\n  _loadBricksImperatively = _asyncToGenerator(function* (bricks, brickPackages) {\n    var promise = enqueueStableLoad(\"bricks\", bricks, brickPackages);\n    flushStableLoadBricks();\n    return dispatchRequestStatus(promise);\n  });\n  return _loadBricksImperatively.apply(this, arguments);\n}\nexport function loadProcessorsImperatively(processors, brickPackages) {\n  var promise = enqueueStableLoad(\"processors\", processors, brickPackages);\n  flushStableLoadBricks();\n  return dispatchRequestStatus(promise);\n}\nvar v2AdapterPromise;\nvar V2_ADAPTER_LOAD_BRICKS = \"v2-adapter.load-bricks\";\n// Get brick/processor items including their dependencies\nfunction getItemsByPkg(type, list, brickPackagesMap) {\n  var itemsByPkg = new Map();\n  var listToLoad = new Set();\n  var add = item => {\n    var _pkg$dependencies;\n    if (listToLoad.has(item)) {\n      return;\n    }\n    listToLoad.add(item);\n    var pkg;\n    var namespace;\n    var lastName;\n    if (type === \"processors\" || item.includes(\".\")) {\n      [namespace, lastName] = item.split(\".\");\n      var pkgId = \"bricks/\".concat(type === \"processors\" ? getProcessorPackageName(namespace) : namespace);\n      pkg = brickPackagesMap.get(pkgId);\n    } else {\n      lastName = item;\n      for (var p of brickPackagesMap.values()) {\n        var _p$elements;\n        if ((_p$elements = p.elements) !== null && _p$elements !== void 0 && _p$elements.some(e => e === lastName)) {\n          pkg = p;\n          break;\n        }\n      }\n    }\n    if (!pkg) {\n      // eslint-disable-next-line no-console\n      console.error(\"Package for \".concat(item, \" not found.\"));\n      return;\n    }\n    var groupItems = itemsByPkg.get(pkg);\n    if (!groupItems) {\n      groupItems = [];\n      itemsByPkg.set(pkg, groupItems);\n    }\n    groupItems.push({\n      fullName: item,\n      lastName\n    });\n\n    // Load their dependencies too\n    var deps = (_pkg$dependencies = pkg.dependencies) === null || _pkg$dependencies === void 0 ? void 0 : _pkg$dependencies[item];\n    if (deps) {\n      for (var dep of deps) {\n        add(dep);\n      }\n    }\n  };\n  for (var item of list) {\n    add(item);\n  }\n  return itemsByPkg;\n}\nfunction loadBrickModule(_x3, _x4, _x5) {\n  return _loadBrickModule.apply(this, arguments);\n}\nfunction _loadBrickModule() {\n  _loadBrickModule = _asyncToGenerator(function* (type, pkgId, item) {\n    var moduleName = \"\".concat(type === \"processors\" ? \"./processors/\" : \"./\").concat(item.lastName);\n    try {\n      yield loadSharedModule(pkgId, moduleName);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n      throw new Error(\"Load \".concat(type, \" of \\\"\").concat(item.fullName, \"\\\" failed\"));\n    }\n  });\n  return _loadBrickModule.apply(this, arguments);\n}\nfunction loadRestBricks(type, pkgs, itemsMap) {\n  return pkgs.map( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (pkg) {\n      var _window$PUBLIC_ROOT;\n      yield loadScript(pkg.filePath, (_window$PUBLIC_ROOT = window.PUBLIC_ROOT) !== null && _window$PUBLIC_ROOT !== void 0 ? _window$PUBLIC_ROOT : \"\");\n      yield waitBasicPkg;\n      return Promise.all(\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      itemsMap.get(pkg).map(item => loadBrickModule(type, pkg.id, item)));\n    });\n    return function (_x6) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}\nfunction enqueueStableLoad(_x7, _x8, _x9) {\n  return _enqueueStableLoad.apply(this, arguments);\n}\nfunction _enqueueStableLoad() {\n  _enqueueStableLoad = _asyncToGenerator(function* (type, list, brickPackages) {\n    var brickPackagesMap = new Map();\n    for (var pkg of brickPackages) {\n      var _pkg$id;\n      var pkgId = (_pkg$id = pkg.id) !== null && _pkg$id !== void 0 ? _pkg$id : getPkgIdByFilePath(pkg.filePath);\n      brickPackagesMap.set(pkgId, pkg);\n    }\n    var itemsByPkg = getItemsByPkg(type, list, brickPackagesMap);\n    var foundBasicPkg;\n    var v2Packages = [];\n    var v3PackagesOtherThanBasic = [];\n    var maybeV2Adapter;\n    for (var _pkg of itemsByPkg.keys()) {\n      if (_pkg.id) {\n        if (_pkg.id === \"bricks/basic\") {\n          foundBasicPkg = _pkg;\n        } else {\n          v3PackagesOtherThanBasic.push(_pkg);\n        }\n      } else {\n        // Brick packages of v2 has no `id`\n        v2Packages.push(_pkg);\n        maybeV2Adapter = brickPackagesMap.get(\"bricks/v2-adapter\");\n        if (!maybeV2Adapter) {\n          // eslint-disable-next-line no-console\n          console.error(\"Using v2 bricks, but v2-adapter not found\");\n        }\n      }\n    }\n    var v2Adapter = maybeV2Adapter;\n    var basicPkgPromise;\n    var basicPkg = foundBasicPkg;\n    if (basicPkg) {\n      var _window$PUBLIC_ROOT2;\n      var tempPromise = loadScript(basicPkg.filePath, (_window$PUBLIC_ROOT2 = window.PUBLIC_ROOT) !== null && _window$PUBLIC_ROOT2 !== void 0 ? _window$PUBLIC_ROOT2 : \"\");\n      // Packages other than BASIC will wait for an extra micro-task tick.\n      if (!basicPkgWillBeResolved) {\n        basicPkgWillBeResolved = true;\n        tempPromise.then(() => Promise.resolve()).then(resolveBasicPkg);\n      }\n      basicPkgPromise = tempPromise.then(() => Promise.all(\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      itemsByPkg.get(basicPkg).map(item => loadBrickModule(type, basicPkg.id, item))));\n    }\n    var pkgPromises = [basicPkgPromise].concat(loadRestBricks(type, v3PackagesOtherThanBasic, itemsByPkg));\n    if (v2Adapter && v2Packages.length > 0) {\n      if (!v2AdapterPromise) {\n        // Load `v2-adapter.load-bricks` and its dependencies\n        var v2AdapterItemsByPkg = getItemsByPkg(\"bricks\", [V2_ADAPTER_LOAD_BRICKS], brickPackagesMap);\n        var v2AdapterPackages = [...v2AdapterItemsByPkg.keys()];\n        var loadV2Adapter = /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator(function* () {\n            yield Promise.all(loadRestBricks(\"bricks\", v2AdapterPackages, v2AdapterItemsByPkg));\n            return document.createElement(V2_ADAPTER_LOAD_BRICKS);\n          });\n          return function loadV2Adapter() {\n            return _ref2.apply(this, arguments);\n          };\n        }();\n        v2AdapterPromise = loadV2Adapter();\n      }\n      pkgPromises.push(v2AdapterPromise.then(adapter => Promise.all(v2Packages.map(pkg => {\n        var pkgId = getPkgIdByFilePath(pkg.filePath);\n        var pkgNamespace = pkgId.split(\"/\")[1];\n        return adapter.resolve(v2Adapter.filePath, pkg.filePath, type === \"bricks\" ?\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        itemsByPkg.get(pkg).map(item => \"\".concat(pkgNamespace, \".\").concat(item.lastName)) : [], pkg.dll,\n        // Todo: remove `brickPackages` as an argument\n        brickPackages);\n      }))));\n    }\n    yield Promise.all(pkgPromises);\n  });\n  return _enqueueStableLoad.apply(this, arguments);\n}\nfunction dispatchRequestStatus(_x10) {\n  return _dispatchRequestStatus.apply(this, arguments);\n}\nfunction _dispatchRequestStatus() {\n  _dispatchRequestStatus = _asyncToGenerator(function* (promise) {\n    window.dispatchEvent(new Event(\"request.start\"));\n    try {\n      yield promise;\n    } finally {\n      window.dispatchEvent(new Event(\"request.end\"));\n    }\n  });\n  return _dispatchRequestStatus.apply(this, arguments);\n}\nfunction getProcessorPackageName(camelPackageName) {\n  return camelPackageName.replace(/[A-Z]/g, match => \"-\".concat(match[0].toLocaleLowerCase())).replace(/_[0-9]/g, match => \"-\".concat(match[1]));\n}\nfunction getPkgIdByFilePath(filePath) {\n  return filePath.split(\"/\").slice(0, 2).join(\"/\");\n}\n//# sourceMappingURL=stableLoadBricks.js.map","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\n// https://github.com/module-federation/module-federation-examples/blob/eda9493f3991a423479fd834cfb1d7b241d9d1f0/advanced-api/dynamic-remotes/app1/src/App.js\nexport default function loadSharedModule(_x, _x2) {\n  return _loadSharedModule.apply(this, arguments);\n}\nfunction _loadSharedModule() {\n  _loadSharedModule = _asyncToGenerator(function* (scope, module) {\n    // Initializes the share scope. This fills it with known provided modules from this build and all remotes\n    yield __webpack_init_sharing__(\"default\");\n    var container = window[scope]; // or get the container somewhere else\n    // Initialize the container, it may provide shared modules\n    yield container.init(__webpack_share_scopes__.default);\n    var factory = yield container.get(module);\n    return factory();\n  });\n  return _loadSharedModule.apply(this, arguments);\n}\n//# sourceMappingURL=loadSharedModule.js.map"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable","ownKeys","e","r","t","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","push","_objectSpread2","length","forEach","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","input","hint","prim","Symbol","toPrimitive","res","call","TypeError","String","_typeof","iterator","constructor","prototype","cache","Map","loadScriptOrStyle","type","src","prefix","attrs","Array","isArray","all","map","item","fixedSrc","test","concat","cachedPromise","get","promise","end","window","dispatchEvent","Event","element","document","createElement","assign","async","rel","href","onload","onerror","firstScript","currentScript","getElementsByTagName","parentNode","insertBefore","set","loadScript","loadStyle","resolveBasicPkg","loadSharedModule","_x","_x2","_loadSharedModule","scope","module","container","init","default","v2AdapterPromise","basicPkgWillBeResolved","waitBasicPkg","flushStableLoadBricks","enqueueStableLoadBricks","bricks","brickPackages","dispatchRequestStatus","enqueueStableLoad","enqueueStableLoadProcessors","processors","loadBricksImperatively","_loadBricksImperatively","loadProcessorsImperatively","V2_ADAPTER_LOAD_BRICKS","getItemsByPkg","list","brickPackagesMap","itemsByPkg","listToLoad","Set","add","_pkg$dependencies","has","pkg","namespace","lastName","includes","split","pkgId","replace","match","toLocaleLowerCase","p","values","_p$elements","elements","some","groupItems","fullName","deps","dependencies","dep","console","loadBrickModule","_x3","_x4","_x5","_loadBrickModule","moduleName","Error","loadRestBricks","pkgs","itemsMap","_ref","_window$PUBLIC_ROOT","filePath","PUBLIC_ROOT","id","_x6","_x7","_x8","_x9","_enqueueStableLoad","_pkg$id","getPkgIdByFilePath","foundBasicPkg","maybeV2Adapter","v2Packages","v3PackagesOtherThanBasic","_pkg","basicPkgPromise","v2Adapter","basicPkg","_window$PUBLIC_ROOT2","tempPromise","pkgPromises","v2AdapterItemsByPkg","v2AdapterPackages","loadV2Adapter","_ref2","adapter","pkgNamespace","dll","_x10","_dispatchRequestStatus","slice","join"],"sourceRoot":""}